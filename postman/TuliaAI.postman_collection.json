{
  "info": {
    "name": "TuliaAI API",
    "description": "Complete API collection for TuliaAI WhatsApp Commerce Platform with RBAC",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_postman_id": "tulia-ai-api-v1"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"SecurePass123!\",\n  \"first_name\": \"John\",\n  \"last_name\": \"Doe\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/auth/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "auth",
                "register"
              ]
            },
            "description": "Register a new user account"
          }
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.environment.set('access_token', jsonData.access_token);",
                  "    pm.environment.set('refresh_token', jsonData.refresh_token);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{user_email}}\",\n  \"password\": \"{{user_password}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/auth/login",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "auth",
                "login"
              ]
            },
            "description": "Login and get access token"
          }
        },
        {
          "name": "Get Profile",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/auth/me",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "auth",
                "me"
              ]
            },
            "description": "Get current user profile"
          }
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refresh_token\": \"{{refresh_token}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/auth/refresh-token",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "auth",
                "refresh-token"
              ]
            }
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/auth/logout",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "auth",
                "logout"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Tenant Management",
      "item": [
        {
          "name": "List My Tenants",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-TENANT-ID",
                "value": "{{tenant_id}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/tenants",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "tenants"
              ]
            },
            "description": "List all tenants where user is a member\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
          }
        },
        {
          "name": "Create Tenant",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-TENANT-ID",
                "value": "{{tenant_id}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"My Business\",\n  \"slug\": \"my-business\",\n  \"whatsapp_number\": \"+1234567890\",\n  \"timezone\": \"Africa/Nairobi\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/tenants/create",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "tenants",
                "create"
              ]
            },
            "description": "\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
          }
        },
        {
          "name": "Get Tenant Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-TENANT-ID",
                "value": "{{tenant_id}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/tenants/{{tenant_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "tenants",
                "{{tenant_id}}"
              ]
            },
            "description": "\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
          }
        }
      ]
    },
    {
      "name": "Tenant Settings",
      "item": [
        {
          "name": "Integrations",
          "item": [
            {
              "name": "List Integrations",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "X-TENANT-ID",
                    "value": "{{tenant_id}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/v1/settings/integrations",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "v1",
                    "settings",
                    "integrations"
                  ]
                },
                "description": "Get status of all integrations\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
              }
            },
            {
              "name": "Set Twilio Credentials",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "X-TENANT-ID",
                    "value": "{{tenant_id}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"sid\": \"ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\",\n  \"token\": \"your_auth_token_here\",\n  \"whatsapp_number\": \"whatsapp:+14155238886\",\n  \"test_connection\": true\n}"
                },
                "url": {
                  "raw": "{{base_url}}/v1/settings/integrations/twilio",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "v1",
                    "settings",
                    "integrations",
                    "twilio"
                  ]
                },
                "description": "Configure Twilio WhatsApp credentials. Required scope: integrations:manage\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
              }
            },
            {
              "name": "Get Twilio Credentials",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "X-TENANT-ID",
                    "value": "{{tenant_id}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/v1/settings/integrations/twilio",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "v1",
                    "settings",
                    "integrations",
                    "twilio"
                  ]
                },
                "description": "Get Twilio configuration status (credentials are masked)\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
              }
            },
            {
              "name": "Delete Twilio Credentials",
              "request": {
                "method": "DELETE",
                "header": [
                  {
                    "key": "X-TENANT-ID",
                    "value": "{{tenant_id}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/v1/settings/integrations/twilio",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "v1",
                    "settings",
                    "integrations",
                    "twilio"
                  ]
                },
                "description": "\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
              }
            },
            {
              "name": "Set WooCommerce Credentials",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "X-TENANT-ID",
                    "value": "{{tenant_id}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"store_url\": \"https://mystore.com\",\n  \"consumer_key\": \"ck_xxxxxxxxxxxxxxxx\",\n  \"consumer_secret\": \"cs_xxxxxxxxxxxxxxxx\",\n  \"test_connection\": true\n}"
                },
                "url": {
                  "raw": "{{base_url}}/v1/settings/integrations/woocommerce",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "v1",
                    "settings",
                    "integrations",
                    "woocommerce"
                  ]
                },
                "description": "\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
              }
            },
            {
              "name": "Set Shopify Credentials",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "X-TENANT-ID",
                    "value": "{{tenant_id}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"shop_domain\": \"mystore.myshopify.com\",\n  \"access_token\": \"shpat_xxxxxxxxxxxxxxxx\",\n  \"test_connection\": true\n}"
                },
                "url": {
                  "raw": "{{base_url}}/v1/settings/integrations/shopify",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "v1",
                    "settings",
                    "integrations",
                    "shopify"
                  ]
                },
                "description": "\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
              }
            }
          ]
        },
        {
          "name": "API Keys",
          "item": [
            {
              "name": "List API Keys",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "X-TENANT-ID",
                    "value": "{{tenant_id}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/v1/settings/api-keys",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "v1",
                    "settings",
                    "api-keys"
                  ]
                },
                "description": "\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
              }
            },
            {
              "name": "Create API Key",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "X-TENANT-ID",
                    "value": "{{tenant_id}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Production API Key\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/v1/settings/api-keys",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "v1",
                    "settings",
                    "api-keys"
                  ]
                },
                "description": "\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Catalog & Products",
      "item": [
        {
          "name": "List Products",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-TENANT-ID",
                "value": "{{tenant_id}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/products/",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "products",
                ""
              ]
            },
            "description": "List all products. Required scope: catalog:view\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
          }
        },
        {
          "name": "Create Product",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-TENANT-ID",
                "value": "{{tenant_id}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Product Name\",\n  \"description\": \"Product description\",\n  \"price\": \"99.99\",\n  \"sku\": \"PROD-001\",\n  \"stock_quantity\": 100\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/products/",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "products",
                ""
              ]
            },
            "description": "Create a new product. Required scope: catalog:edit\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
          }
        },
        {
          "name": "Sync from WooCommerce",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-TENANT-ID",
                "value": "{{tenant_id}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/products/sync/woocommerce",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "products",
                "sync",
                "woocommerce"
              ]
            },
            "description": "Sync products from WooCommerce. Required scope: catalog:edit\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
          }
        }
      ]
    },
    {
      "name": "Conversations & Messages",
      "item": [
        {
          "name": "List Conversations",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-TENANT-ID",
                "value": "{{tenant_id}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/messages/conversations",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "messages",
                "conversations"
              ]
            },
            "description": "List all conversations. Required scope: conversations:view\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
          }
        },
        {
          "name": "Get Conversation Messages",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-TENANT-ID",
                "value": "{{tenant_id}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/messages/conversations/{{conversation_id}}/messages",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "messages",
                "conversations",
                "{{conversation_id}}",
                "messages"
              ]
            },
            "description": "\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
          }
        },
        {
          "name": "Send Message",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-TENANT-ID",
                "value": "{{tenant_id}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"customer_id\": \"{{customer_id}}\",\n  \"content\": \"Hello from TuliaAI!\",\n  \"message_type\": \"manual_outbound\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/messages/send",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "messages",
                "send"
              ]
            },
            "description": "Send message to customer. Requires customer_id (UUID). Use 'List Conversations' to get customer IDs.\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
          }
        }
      ]
    },
    {
      "name": "Orders",
      "item": [
        {
          "name": "List Orders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-TENANT-ID",
                "value": "{{tenant_id}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/orders/",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "orders",
                ""
              ]
            },
            "description": "List all orders. Required scope: orders:view\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
          }
        },
        {
          "name": "Get Order Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-TENANT-ID",
                "value": "{{tenant_id}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/orders/{{order_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "orders",
                "{{order_id}}"
              ]
            },
            "description": "\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
          }
        }
      ]
    },
    {
      "name": "Wallet & Finance",
      "item": [
        {
          "name": "Get Wallet Balance",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-TENANT-ID",
                "value": "{{tenant_id}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/wallet/balance",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "wallet",
                "balance"
              ]
            },
            "description": "Get wallet balance. Required scope: finance:view\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
          }
        },
        {
          "name": "List Transactions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-TENANT-ID",
                "value": "{{tenant_id}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/wallet/transactions",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "wallet",
                "transactions"
              ]
            },
            "description": "List wallet transactions. Required scope: finance:view\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
          }
        }
      ]
    },
    {
      "name": "Analytics",
      "item": [
        {
          "name": "Get Overview",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-TENANT-ID",
                "value": "{{tenant_id}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/analytics/overview",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "analytics",
                "overview"
              ]
            },
            "description": "Get analytics overview. Required scope: analytics:view\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
          }
        },
        {
          "name": "Get Daily Analytics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-TENANT-ID",
                "value": "{{tenant_id}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/analytics/daily?start_date=2025-01-01&end_date=2025-01-31",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "analytics",
                "daily"
              ],
              "query": [
                {
                  "key": "start_date",
                  "value": "2025-01-01"
                },
                {
                  "key": "end_date",
                  "value": "2025-01-31"
                }
              ]
            },
            "description": "\n\n**Authentication:** Requires JWT token (login first). RBAC enforced."
          }
        }
      ]
    },
    {
      "name": "Utilities",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/health/",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "health",
                ""
              ]
            },
            "description": "Check API health status (no auth required)"
          }
        },
        {
          "name": "Test Send WhatsApp",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-TENANT-ID",
                "value": "{{tenant_id}}"
              },
              {
                "key": "X-TENANT-API-KEY",
                "value": "{{tenant_api_key}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"to\": \"+1234567890\",\n  \"message\": \"Test message from TuliaAI\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/test/send-whatsapp/",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "test",
                "send-whatsapp",
                ""
              ]
            }
          }
        }
      ]
    }
  ]
}