# ============================================================================
# TULIA AI ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .env and configure with your actual values
# NEVER commit real secrets to version control
# ============================================================================

# ============================================================================
# DJANGO CORE SETTINGS
# ============================================================================
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(50))"
SECRET_KEY=your-secret-key-here-change-in-production
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# For development (SQLite - simple setup):
DATABASE_URL=sqlite:///db.sqlite3

# For production (PostgreSQL - recommended):
# DATABASE_URL=postgresql://tulia_user:tulia_pass@localhost:5432/tulia_db

DB_CONN_MAX_AGE=600

# ============================================================================
# REDIS & CELERY CONFIGURATION
# ============================================================================
# Redis is used for caching, rate limiting, and Celery task queue
REDIS_URL=redis://localhost:6379/0
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# ============================================================================
# AI MODEL CONFIGURATION (REQUIRED - Choose ONE)
# ============================================================================
# LangChain will automatically detect and use the configured provider
# Using standard LangChain environment variable names

# Option 1: OpenAI (Recommended for best performance)
OPENAI_API_KEY=your-openai-key-here
OPENAI_MODEL=gpt-4o-mini  # Options: gpt-4o, gpt-4o-mini, gpt-4-turbo

# Option 2: Google Gemini (Cost-effective with large context)
# GOOGLE_API_KEY=your-gemini-api-key-here
# GEMINI_MODEL=gemini-1.5-flash  # Options: gemini-1.5-pro, gemini-1.5-flash

# Option 3: Together AI (Open source models)
# TOGETHER_API_KEY=your-together-api-key-here
# TOGETHER_MODEL=meta-llama/Llama-2-7b-chat-hf

# ============================================================================
# JWT AUTHENTICATION (REQUIRED)
# ============================================================================
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(50))"
JWT_SECRET_KEY=your-jwt-secret-key-here-must-be-at-least-32-chars
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
JWT_REFRESH_EXPIRATION_DAYS=7

# ============================================================================
# ENCRYPTION (REQUIRED)
# ============================================================================
# Generate with: python -c "import os, base64; print(base64.b64encode(os.urandom(32)).decode('utf-8'))"
ENCRYPTION_KEY=your-base64-encoded-32-byte-key-here

# ============================================================================
# PLATFORM SERVICE PROVIDERS (GLOBAL SETTINGS)
# ============================================================================
# These are platform-wide service provider settings
# Can be changed to switch providers across the entire platform

# Email Service Provider (Platform Level)
EMAIL_PROVIDER=sendgrid  # Options: sendgrid, ses, mailgun, console
SENDGRID_API_KEY=your-sendgrid-api-key-here
DEFAULT_FROM_EMAIL=noreply@trytulia.com

# For development, use console mode:
# EMAIL_PROVIDER=console

# SMS Service Provider (Platform Level)
SMS_PROVIDER=africastalking  # Options: africastalking, twilio_sms, aws_sns
AFRICASTALKING_USERNAME=your-africastalking-username
AFRICASTALKING_API_KEY=your-africastalking-api-key

# For development, use console mode:
# SMS_PROVIDER=console

# WhatsApp Service Provider (Platform Level)
WHATSAPP_PROVIDER=twilio  # Options: twilio, meta_business (future)
# Note: Twilio credentials are configured per tenant, not here

# ============================================================================
# PAYMENT COLLECTION MODEL (PLATFORM SETTINGS)
# ============================================================================
# Defines how payments are collected and distributed

# Payment Collection Strategy
PAYMENT_COLLECTION_MODE=platform_collect  # Options: platform_collect, direct_tenant
PLATFORM_TRANSACTION_FEE_PERCENT=2.5  # Platform fee on transactions
WITHDRAWAL_FEE_FLAT=50.00  # Flat fee for tenant withdrawals (in base currency)
WITHDRAWAL_FEE_PERCENT=1.0  # Percentage fee for tenant withdrawals

# Platform Payment Credentials (for collecting payments)
# M-Pesa (Platform Paybill - collects all payments)
PLATFORM_MPESA_CONSUMER_KEY=your-platform-mpesa-consumer-key
PLATFORM_MPESA_CONSUMER_SECRET=your-platform-mpesa-consumer-secret
PLATFORM_MPESA_SHORTCODE=123456  # Your platform paybill number
PLATFORM_MPESA_PASSKEY=your-platform-mpesa-passkey
PLATFORM_MPESA_ENVIRONMENT=sandbox  # or production

# Stripe (Platform Account - collects all payments)
PLATFORM_STRIPE_SECRET_KEY=sk_live_your-platform-stripe-secret-key
PLATFORM_STRIPE_PUBLISHABLE_KEY=pk_live_your-platform-stripe-publishable-key
PLATFORM_STRIPE_WEBHOOK_SECRET=whsec_your-platform-webhook-secret

# Paystack (Platform Account - collects all payments)
PLATFORM_PAYSTACK_SECRET_KEY=sk_live_your-platform-paystack-secret-key
PLATFORM_PAYSTACK_PUBLIC_KEY=pk_live_your-platform-paystack-public-key

# ============================================================================
# RAG SYSTEM (OPTIONAL - for AI knowledge base)
# ============================================================================
# Pinecone Vector Database for document-based AI responses
PINECONE_API_KEY=your-pinecone-api-key-here
PINECONE_INDEX_NAME=tulia-ai-rag
PINECONE_DIMENSION=1536
PINECONE_METRIC=cosine
PINECONE_CLOUD=aws
PINECONE_REGION=us-east-1

# Document processing settings
MAX_DOCUMENT_SIZE=10485760  # 10MB
RAG_CHUNK_SIZE=400
RAG_CHUNK_OVERLAP=50
RAG_TOP_K_RESULTS=5

# ============================================================================
# FRONTEND CONFIGURATION
# ============================================================================
FRONTEND_URL=http://localhost:3000

# ============================================================================
# MONITORING (OPTIONAL)
# ============================================================================
# Sentry for error tracking
SENTRY_DSN=your-sentry-dsn-here
SENTRY_ENVIRONMENT=development

# ============================================================================
# SECURITY SETTINGS
# ============================================================================
RATE_LIMIT_ENABLED=True

# Logging
LOG_LEVEL=INFO
JSON_LOGS=False

# Subscription
DEFAULT_TRIAL_DAYS=14

# ============================================================================
# CORS CONFIGURATION (PRODUCTION)
# ============================================================================
# For production, specify allowed origins (comma-separated)
CORS_ALLOWED_ORIGINS=https://app.trytulia.com,https://admin.trytulia.com

# ============================================================================
# TENANT WITHDRAWAL SETTINGS
# ============================================================================
# Settings for tenant payment withdrawals

# Minimum withdrawal amount (in base currency)
MIN_WITHDRAWAL_AMOUNT=1000.00

# Withdrawal processing schedule
WITHDRAWAL_PROCESSING_DAYS=monday,wednesday,friday  # Days of week to process withdrawals
WITHDRAWAL_PROCESSING_TIME=14:00  # Time of day (24hr format)

# Supported withdrawal methods for tenants
SUPPORTED_WITHDRAWAL_METHODS=mpesa,bank_transfer,paypal

# ============================================================================
# IMPORTANT NOTES
# ============================================================================
# 1. PAYMENT MODEL: Platform collects all payments, tenants withdraw with fees
# 2. SERVICE PROVIDERS: Can be switched at platform level
# 3. TWILIO CREDENTIALS: Still configured per tenant for WhatsApp
# 4. AI MODELS: Choose ONE provider, LangChain handles the integration
# 5. TENANT WITHDRAWALS: Processed on scheduled days with platform fees
# 6. Generate strong keys for production using the commands above
# ============================================================================